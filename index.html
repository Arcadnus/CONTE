<!DOCTYPE html>
<html>
  <head>
    <title>Device Properties Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.getElementById("botaoGravar").addEventListener("click", onDeviceReady);
   
    // Record audio
    // 
    function recordAudio() {
        var src = "/myrecording.mp3";
        document.getElementById('alert').innerHTML = "botão apertado! 2 passo";

        var mediaRec = new Media(

          src,
            // success callback
          
            function() {
                document.getElementById('alert').innerHTML = "recordAudio():Audio Success";
            },

            // error callback
            function(err) {
                document.getElementById('alert').innerHTML = "recordAudio():Audio Error: "+ err.code;
            }, 

            // status callback
            function (status) {
                document.getElementById('alert').innerHTML = "recordAudio(): Audio status:" + status;
            });

        document.getElementById('alert2').innerHTML = "midia criada"; //criar midia

    // PhoneGap is ready

        // Record audio
        mediaRec.startRecord();
    }
    //
    function onDeviceReady() {

        document.getElementById('alert').innerHTML = "botão apertado! 1 passo";
        recordAudio();
    }

    // onSuccess Callback
    //
    function onSuccess() {
        document.getElementById('alert').innerHTML = "recordAudio():Audio Success";
    }

    // onError Callback 
    //
    function onError(error) {
        document.getElementById('alert').innerHTML = 'code: ' + error.code    + '<br>' + 
              'message: ' + error.message + '<br>';
    }

    // Set audio position
    // 
    function setAudioPosition(position) {
        document.getElementById('audio_position').innerHTML = position;
    }

    // Play audio
    //
    function playAudio(url) {
        // Play the audio file at url
        var my_media = new Media(url,
            // success callback
            function() {
                document.getElementById('alert').innerHTML = "playAudio():Audio Success";
            },
            // error callback
            function(err) {
                document.getElementById('alert').innerHTML = "playAudio():Audio Error: "+err;
            }
        );

        // Play audio
        my_media.play();

        // Pause after 10 seconds
        setTimeout(function() {
            my_media.stop();
        }, 10000);
    }

    </script>
  </head>
  <body>
    <p id="media">Gravar ver1 audio...</p>
    <p id="alert"></p>
    <p id="alert2"></p>
    <p id="msgDisplay"></p>
    <p id="audio_position"></p>
    <button id="botaoGravar">Gravar</button>
  </body>
</html>